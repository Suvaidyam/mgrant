[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"row\" id=\"cards\">\n  \n</div>\n",
  "modified": "2024-12-11 17:16:30.454526",
  "name": "Tasks",
  "private": 0,
  "roles": [],
  "script": "async function fetchData() {\n    const data = await new Promise((resolve, reject) => {\n        frappe.call({\n            method: \"frappe.client.get_list\",\n            args: {\n                doctype: \"mGrant Task\",\n                fields: [\"*\"],\n                limit_page_length: 20\n            },\n            callback: function(response) {\n                if (response.message) {\n                    resolve(response.message);\n                } else {\n                    reject(\"No data found\");\n                }\n            }\n        });\n    });\n\n    return data;\n}\n\nfunction renderCards(data) {\n    const cardsContainer = root_element.querySelector(\"#cards\");\n    cardsContainer.innerHTML = \"\"; // Clear existing content\n\n    data.forEach(task => {\n        const card = `\n                  <div class=\"col-lg-4 col-md-6 col-sm-12 mb-2\">\n                        <div class=\"card border-light shadow-sm\" style=\"padding: 16px;\">\n                            <!-- Task Header -->\n                            <div class=\"d-flex justify-content-between align-items-center\">\n                                <span title=\"task title\" class=\"text-dark me-2\" style=\"font-size: 16px; font-weight: 400; line-height: 17.6px; letter-spacing: 0.5%; color: #000;\">\n                                    ${task.title}\n                                </span>\n                                <div class=\"d-flex align-items-center\" style=\"gap: 24px;\">\n                                    <div class=\"dropdown\">\n                                        <p title=\"action\" class=\"pointer pt-3\" id=\"dropdownMenuButton-1\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                            <i class=\"fa fa-ellipsis-h mt-2\" style=\"transform: rotate(90deg); font-size: 20px; width: 20px; height: 20px;\"></i>\n                                        </p>\n                                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton-1\">\n                                            <a class=\"dropdown-item edit-btn\" data-task=\"1\">Edit</a>\n                                            <a class=\"dropdown-item delete-btn\" data-task=\"1\">Delete</a>\n                                        </div>\n                                    </div>\n                                    <input type=\"checkbox\" class=\"toggleCheckbox form-check-input\" data-id=\"1\" style=\"width: 20px !important; height: 20px !important;\">\n                                </div>\n                            </div>\n                \n                            <!-- User Info -->\n                            <div class=\"d-flex align-items-center text-muted small\" style=\"gap: 6px;\">\n                                <div class=\"avatar bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-2\" style=\"width: 24px; height: 24px;\">\n                                    ${task.assigned_to ? task.assigned_to[0].toUpperCase() : '-'}\n                                </div>\n                                <span style=\"color: #6E7073; font-size: 12px; font-weight: 400; line-height: 13.2px;\">\n                                    ${ task.assigned_to ?? 'No Assignee'}\n                                </span>\n                            </div>\n                            <p style=\"margin-top: 8px;max-height:40px;min-height:40px;overflow:hidden;\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Task description\" data-html=\"true\">\n                                ${task.description}\n                            </p>\n                \n                            <!-- Task Priority and Status -->\n                            <div class=\"d-flex align-items-center justify-content-between\" style=\"gap: 12px;\">\n                                <div class=\"d-flex\" style=\"gap: 10px;\">\n                                    <div class=\"dropdown\" style=\"width: 100px; height: 26px; border-radius: 4px; background-color: #F1F1F1; color: #0E1116; font-weight: 400; font-size: 14px; line-height: 15.4px; letter-spacing: 0.25%; display: flex; align-items: center; justify-content: center; gap: 4px;\">\n                                        <span title=\"Priority\" id=\"dropPriority-1\" class=\"small dropdown-toggle badge bg-light pointer text-muted\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                            Low\n                                        </span>\n                                        <div class=\"dropdown-menu\" aria-labelledby=\"dropPriority-1\">\n                                            <a class=\"dropdown-item task-priority\" data-task=\"1\" data-priority=\"Low\">Low</a>\n                                            <a class=\"dropdown-item task-priority\" data-task=\"1\" data-priority=\"Medium\">Medium</a>\n                                            <a class=\"dropdown-item task-priority\" data-task=\"1\" data-priority=\"High\">High</a>\n                                        </div>\n                                    </div>\n                \n                                    <div class=\"dropdown\" style=\"width: 100px; height: 26px; border-radius: 4px; background-color: #F1F1F1; color: #0E1116; font-weight: 400; font-size: 14px; line-height: 15.4px; letter-spacing: 0.25%; display: flex; align-items: center; justify-content: center; gap: 4px;\">\n                                        <span title=\"status\" id=\"dropStatus-1\" class=\"small dropdown-toggle bg-light pointer badge text-muted\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                            Status\n                                        </span>\n                                        <div class=\"dropdown-menu\" aria-labelledby=\"dropStatus-1\">\n                                            <a class=\"dropdown-item task-status\" data-task=\"1\" data-status=\"Backlog\">Backlog</a>\n                                            <a class=\"dropdown-item task-status\" data-task=\"1\" data-status=\"Todo\">Todo</a>\n                                            <a class=\"dropdown-item task-status\" data-task=\"1\" data-status=\"In Progress\">In Progress</a>\n                                            <a class=\"dropdown-item task-status\" data-task=\"1\" data-status=\"Done\">Done</a>\n                                            <a class=\"dropdown-item task-status\" data-task=\"1\" data-status=\"Canceled\">Canceled</a>\n                                        </div>\n                                    </div>\n                                </div>\n                \n                                <span class=\"ms-auto small\" style=\"color: #6E7073; font-size: 12px;\">\n                                    Grant: <span style=\"color: #0E1116;\">${task.name}</span>\n                                </span>\n                            </div>\n                \n                            <!-- Due Date -->\n                            <p class=\"small\" style=\"color: #6E7073; padding-top: 16px;margin: 0;\">\n                                Due Date: <span class=\"text-danger\"> ${task.due_date ??  '--:--'}</span>\n                            </p>\n                        </div>\n                    </div>`;\n        cardsContainer.insertAdjacentHTML(\"beforeend\", card);\n    });\n}\n\n// Fetch and render data\nfetchData()\n    .then(data => renderCards(data))\n    .catch(error => console.error(error));\n",
  "style": "*{\n    margin:0px;\n    padding:0px;\n}\n\n\n.tooltip-inner {\n    background-color: white !important;\n    max-width: 320px !important;\n}\n\n.card {\n    padding: 16px;\n}\n\n.d-flex {\n    display: flex;\n}\n\n.align-items-center {\n    align-items: center;\n}\n\n.justify-content-between {\n    justify-content: space-between;\n}\n\n.text-muted {\n    color: #6E7073;\n}\n\n.bg-primary {\n    background-color: #007bff;\n}\n\n.avatar {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.dropdown-menu {\n    min-width: 120px;\n}\n\n.badge {\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 15.4px;\n}\n\n.pointer {\n    cursor: pointer;\n}\n\n.text-dark {\n    color: #000;\n}\n\n.text-danger {\n    color: red;\n}\n\n.text-warning {\n    color: orange;\n}\n\n.text-success {\n    color: green;\n}\n\n.text-muted {\n    color: #6E7073;\n}\n\n.card .d-flex {\n    gap: 12px;\n}\n"
 }
]